<!-- LICENSING
  This file is part of the textbook "Exploring Differential Equations, An Interactive, Student-Centered Approach" by Geoffrey Cox.
  License: Creative Commons Attribution-ShareAlike 4.0 International (CC BY-SA 4.0)
  You are free to:
    ‚Ä¢ Share ‚Äî copy and redistribute the material in any medium or format.
    ‚Ä¢ Adapt ‚Äî remix, transform, and build upon the material for any purpose, even commercially.
  Under the following terms:
    ‚Ä¢ Attribution ‚Äî You must give appropriate credit, provide a link to the license, and indicate if changes were made.
    ‚Ä¢ ShareAlike ‚Äî If you remix, transform, or build upon the material, you must distribute your contributions under the same license.
  Full license text: https://creativecommons.org/licenses/by-sa/4.0/legalcode
  Recommended attribution: "Exploring Differential Equations" by Geoffrey Cox, licensed CC BY-SA 4.0.
-->
<section label="transforming-piecewise-functions">
	<title>Transforming Piecewise Functions</title>
	<introduction>
		<p> 
			Until now, you've learned how step functions act like ON‚ÄìOFF switches, and you've built the three key Laplace rules (L<m>_{9}</m>, L<m>_{10}</m>, and L<m>_{11}</m>) that describe how those switches behave under the Laplace transform. With these tools, we're ready for the real payoff: transforming <em>entire piecewise functions</em>.
		</p>
	</introduction>

	<subsection label="transforming-piecewise-functions-general-strategy">
		<title>General Strategy</title>

		<p>
			The game plan for handling a piecewise function in the Laplace domain is always the same three steps.
		</p>

		<assemblage xml:id="piecewise-laplace-strategy">
			<title>üìú Laplace Transform of a Piecewise Function</title>
			<p>
				To find <m>\lap{g(t)}</m> for a piecewise function:
				<ol>
					<li><xref ref="piecewise-to-unit-step" text="custom">Rewrite <m>g(t)</m> using unit step functions.</xref></li>
					<li>Combine and simplify terms so you have the fewest possible <m>u_c(t)</m>-switches.</li>
					<li>Apply the Laplace rules (<xref ref="lt-L9" text="custom">L<m>_9</m></xref>, <xref ref="lt-L10" text="custom">L<m>_{10}</m></xref>, <xref ref="lt-L11" text="custom">L<m>_{11}</m></xref>) one piece at a time.</li>
				</ol>
			</p>
		</assemblage>

		<p>
			That's it. Once each term is transformed, you can add them up thanks to linearity. You'll be left with a fully transformed piecewise function living in the Laplace domain.
		</p>

		<exercise><title><e component="emoji">üìñ‚ùì</e>  Strategy for Transforming a Piecewise Function</title>
			<task label="transforming-piecewise-functions-prep-1"><title>What's Should you do First?</title>
				<statement correct="yes">
					<p>
						To take the Laplace transform of a piecewise function, you should first rewrite it in terms of unit step functions.
					</p>
				</statement>
				<feedback>
					<p>
						That's the foundation of this method! Once a piecewise function is rewritten using step functions, you can apply the shift rule to each piece.
					</p>
				</feedback>
			</task>

			<task label="transforming-piecewise-functions-prep-2"><title>Matching Activation Intervals to Switches</title>
			<statement>
				<p>
					On the left are activation intervals for a piecewise function. Drag each interval to the unit step switch that activates it.
				</p>
			</statement>
			<feedback>
				<p>
				These patterns should be second nature now, this matching is what allows us to build the step-based expression for the Laplace transform.
				</p>
			</feedback>
			<cardsort>
				<match>
				<premise><m>t \lt 3</m></premise>
				<response><m>1 - u_3(t)</m></response>
				</match>
				<match>
				<premise><m>3 \le t \lt 5</m></premise>
				<response><m>u_3(t) - u_5(t)</m></response>
				</match>
				<match>
				<premise><m>t \ge 5</m></premise>
				<response><m>u_5(t)</m></response>
				</match>
				<match>
				<premise><m>0 \le t \lt 2</m></premise>
				<response><m>u_0(t) - u_2(t)</m></response>
				</match>
			</cardsort>
			</task>
		</exercise>
	</subsection>

	<subsection label="transforming-piecewise-functions-piecewise-in-laplace-domain">
		<title>Piecewise Functions in the Laplace Domain</title>

		<p>
			Let's apply this strategy to the forcing function of our model problem, <m>g(t)</m>:
		</p>

		<p>
			<xref ref="piecewise-to-unit-step" text="custom">Write <m>g(t)</m> using step functions.</xref> The pieces, intervals and switches for <m>g</m> are:
		</p>

		<tabular halign="center">
			<col right="minor"/>
			<col right="minor"/>
			<row bottom="minor"> <cell>Piece</cell> <cell>Active Interval</cell> <cell>Step Function Switch</cell> </row>
			<row> <cell><me>2t</me></cell> <cell><me>0 \le t \lt 1		 </me></cell> <cell><me>u_0(t) - u_1(t)		</me></cell> </row>
			<row> <cell><me> 3</me></cell> <cell><me>1 \le t \lt 4 </me></cell> <cell><me>u_1(t) - u_4(t)	</me></cell> </row>
			<row> <cell><me> 0</me></cell> <cell><me>t \ge 4		 </me></cell> <cell><me>u_4(t)			</me></cell> </row>
		</tabular>

		<p>
			Multiply each piece by its switch, then sum:
			<me>g(t) = 2t\Big(u_0(t) - u_1(t)\Big) + 3\Big(u_1(t) - u_4(t)\Big) + 0\ u_4(t).</me>
		</p>

		<p>
			Combine like switch terms:
			<me>g(t) = 2t\ u_0(t) + (3 - 2t)\ u_1(t) - 3\ u_4(t).</me>
		</p>

		<p>
			Now, we are ready to find the Laplace transform of <m>g</m>. Taking the Laplace transform of both sides and using linearity, we get <m>3</m> transforms:
			<me>
				\lap{g(t)} 
				= 2\ub{\lap{t\ u_0(t)}}_{\ds\text{1Ô∏è‚É£}} 
				+ \ub{\lap{(3 - 2t)\ u_1(t)}}_{\ds\text{2Ô∏è‚É£}} 
				- 3\ub{\lap{u_4(t)}}_{\ds\text{3Ô∏è‚É£}}
			</me>.
		</p>

		<p>
				1Ô∏è‚É£ Apply <xref ref="lt-L10" text="custom">L<m>_{10}</m></xref> with: <m>\quad c=0\quad</m> &amp; <m>\quad f(t) = t \quad\Rightarrow\quad f(t+0) = t</m>:
			<me>\lap{t\cdot u_0(t)} = e^{-0s}\lap{f(t+0)} = \lap{t} = \frac1{s^2} </me>
		</p>

		<p>
				2Ô∏è‚É£ Apply <xref ref="lt-L10" text="custom">L<m>_{10}</m></xref> with: <m>\quad c=1\quad</m> &amp; <m>\quad f(t) = 3 - 2t \quad\Rightarrow\quad f(t+1) = 1-2t</m>:
			<me>\lap{(3 - 2t)\cdot u_1(t)} = e^{-s}\lap{f(t+1)} = e^{-s}\lap{1-2t} = e^{-s}\left(\frac1{s} - \frac{2}{s^2}\right)</me>
		</p>

		<p>
				3Ô∏è‚É£ Apply <xref ref="lt-L9" text="custom">L<m>_{9}</m></xref> with: <m>\quad c=4</m>: <m>\quad\lap{u_4(t)} = \dfrac{e^{-4s}}{s}</m>
		</p>

		<p>
			Writing these together under one sum completes the Laplace transform:
			<me>\lap{g(t)} =  \frac2{s^2} + \left(\frac1{s} - \frac{2}{s^2}\right)e^{-s} - \frac{3}{s}e^{-4s} </me>
		</p>
	</subsection>

	<subsection label="transforming-piecewise-functions-examples">
		<title>Examples</title>
		
		<p>
			These worked examples illustrate how the three step-function Laplace rules combine into one powerful method for handling any piecewise function you might encounter.
		</p>

		<example>
			<title>Transforming a 2-Part Piecewise Function</title>
			<statement>
			<p>
				Find the Laplace transform of
				<me>
					g(t) = \left\{
					\begin{array}{ll}
						e^{-t},	\amp t \lt 1 \\
						3,		\amp t \ge 1
					\end{array}
					\right.
				</me>
			</p>
			</statement>
			<solution><title><m>\rightarrow \lap{g(t)}</m></title>
				<p>
					First, determine the step function switches
					<me>
						g(t) =
						\left\{
							\begin{array}{llll}
								e^{-t}, &amp; t \lt 1 &amp; \leftarrow &amp; 1-u_{1}(t)\\
								3,		&amp; t \ge 1 &amp; \leftarrow &amp; u_{1}(t).
							\end{array}
						\right.
					</me>
				</p>

				<p>
					Now, contruct <m>g(t)</m> and combine the <m>u_1(t)</m> terms:
				</p>

				<md>
					<mrow> g(t)	\amp = e^{-t} \cdot \left(1 - u_{1}(t)\right) + 3 \cdot u_{1}(t) </mrow>.
					<mrow>		\amp = e^{-t} + \left(-e^{-t} + 3\right) \cdot u_{1}(t)</mrow>.
				</md>

				<p>
					Apply the Laplace transform to both terms:
				</p>

				<sidebyside widths="70% 30%">
					<p>
						<md>
							<mrow>
								\lap{g(t)} 
								\amp = \us{\large <xref ref="lt-L2" text="custom">L<m>_{2}</m></xref>}{\ul{\lap{e^{-t}}}} 
								+ \us{\large ‚≠ê <xref ref="lt-L10" text="custom">L<m>_{10}</m></xref>}{\ul{\lap{\left(3 - e^{-t}\right) \cdot u_{1}(t)}}}
							</mrow>
							<mrow>
								\amp = \frac{1}{s+1} + e^{-s}\lap{3 - e^{-1}e^{-t}}
							</mrow>
							<mrow>
								\amp = \frac{1}{s+1} + e^{-s}\left(\lap{3} - e^{-1}\lap{e^{-t}}\right)
							</mrow>
							<mrow>
								\amp = \frac{1}{s+1} + e^{-s}\left(\frac3{s} - e^{-1}\frac{1}{s+1}\right)
							</mrow>
						</md>
					</p>
					<p>
						<md>
							<mrow>‚≠ê\quad c \amp = 1</mrow>
							<mrow>f(t) \amp = 3 - e^{-t}</mrow>
							<mrow>f(t+1) \amp = 3 - e^{-(t+1)}</mrow>
							<mrow> \amp = 3 - e^{-1}e^{-t}</mrow>
						</md>
					</p>
				</sidebyside>

				<p>
					Simplifying completes the transform:
					<me>
						\lap{g(t)} 
						= \frac{3e^{-s}}{s} + \frac{1 - e^{-s-1}}{s + 1}
					</me>.
				</p>
			</solution>
		</example>

		<example>
			<title>Transforming a 3-Part Piecewise Function</title>
			<statement>
			<p>
				Find the Laplace transform of
				<me>
					h(t) = \left\{
					\begin{array}{ll}
						0, 	\amp t \lt 2 \\
						t,	\amp 2 \le t \lt 5 \\
						4,	\amp t \ge 5
					\end{array}
					\right.
				</me>
			</p>
			</statement>
			<solution><title><m>\rightarrow \lap{h(t)}</m></title>
				<p>
					Write each piece using step functions:
				</p>
				<md>
					<mrow> h(t) \amp = t \cdot (u_{2}(t) - u_{5}(t)) + 4 \cdot u_{5}(t) </mrow>.
				</md>

				<p>
					Combine like terms:
				</p>
				<md>
					<mrow> h(t) \amp = t \, u_{2}(t) - t \, u_{5}(t) + 4 \, u_{5}(t) </mrow>
					<mrow> \amp = t \, u_{2}(t) + (4 - t) u_{5}(t) </mrow>.
				</md>

				<p>
					Transform each term:
				</p>

				<ul marker="disc">
					<li><term>Term 1:</term> Apply <xref ref="lt-L10" text="custom">L<sub>10</sub></xref> with <m>c=2</m> and <m>f(t)=t</m>. Then <m>f(t+2)=t+2</m>, so:
						<me>\lap{t \, u_{2}(t)} = e^{-2s}\lap{t+2} = e^{-2s}\left( \frac{1}{s^2} + \frac{2}{s} \right)</me>.
					</li>

					<li><term>Term 2:</term> Apply <xref ref="lt-L10" text="custom">L<sub>10</sub></xref> with <m>c=5</m> and <m>f(t)=4-t</m>. Then <m>f(t+5)=4-(t+5)=-t-1</m>, so:
						<me>\lap{(4-t) u_{5}(t)} = e^{-5s}\lap{-t-1} = e^{-5s}\left(-\frac{1}{s^2} - \frac{1}{s}\right)</me>.
					</li>
				</ul>

				<p>
					Combine the pieces:
					<me>
						\lap{h(t)} = e^{-2s}\left( \frac{1}{s^2} + \frac{2}{s} \right) + e^{-5s}\left( -\frac{1}{s^2} - \frac{1}{s} \right)
					</me>.
				</p>
			</solution>
		</example>
	</subsection>

</section>