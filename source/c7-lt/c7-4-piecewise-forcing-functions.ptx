<!--
Section: Piecewise Forcing Functions
====================================

Introduction
============
	* We have looked at solving linear differential equations with constant coefficients when the forcing function is some combination of polynomial, exponential, sine, or cosine functions.
	* We assumed that the forcing function remained the same for any value of the independent variable.
	* Now, we want to consider the case when the forcing function can switch from one function to another function at some point. For example, we might have a forcing function that is initially <m>t^2</m>, then at some time later it switches to <m>\sin(t)</m>.
	* This behavior can be described using a piecewise defined function and in this section we will see how the Laplace transform can be used to solve linear differential equations with piecewise defined forcing functions.
	* Before we can solve such equations, we first need to learn how to rewrite piecewise defined functions in terms of functions that the Laplace transform can easily handle.
	* These functions are called <em>unit step functions</em>.

Topics
======
	* Piecewise Functions
	* Unit-Step Functions
	* Writing Piecewise Functions in Terms of Unit-Step Functions
	* Laplace Transforms of Unit-Step Functions
	* Laplace Transforms of Piecewise Functions
	* Solving Linear Differential Equations with Piecewise Forcing Functions
	-->

<section xmlns:xi="http://www.w3.org/2001/XInclude"><title> Piecewise Forcing Functions </title>

	<introduction>

		<p>
			Needs to be written.
		</p>
		
	</introduction>

	<subsection><title> Unit Step Functions </title>

		<reading-questions><title> ðŸ‘€ <em>Reading Preparation</em> </title>

			<p>
				<exercise label="prep-unit-step-outputs"><title> Unit-Step Output </title>
					<statement>
						<p>
							Consider the function defined by
							<me>
								u(t) = \left\{
								\begin{array}{ll}
									0,	&amp; t \lt 0\\
									1,	&amp; t \ge 0.
								\end{array} \right.
							</me>
						</p>

						<p>
							Give the output of <m>u(t)</m> for the following values of <m>t</m>.
						</p>

						<tabular>
							<col/>
							<col halign = "right"/>
							<col/>
							<col/>
							<row>
								<cell>(a)</cell>
								<cell><m>U(5)</m></cell>
								<cell><m>=</m></cell>
								<cell><fillin mode="number" answer="1" /></cell>
							</row>
							<row>
								<cell>(b)</cell>
								<cell><m>U(-9.7)</m></cell>
								<cell><m>=</m></cell>
								<cell><fillin mode="number" answer="0" /></cell>
							</row>
							<row>
								<cell>(c)</cell>
								<cell><m>U(-0.1)</m></cell>
								<cell><m>=</m></cell>
								<cell><fillin mode="number" answer="0" /></cell>
							</row>
							<row>
								<cell>(d)</cell>
								<cell><m>U(0)</m></cell>
								<cell><m>=</m></cell>
								<cell><fillin mode="number" answer="1" /></cell>
							</row>
						</tabular>
					</statement>
					<evaluation>
						<evaluate><test><strcmp use-answer="yes" /></test></evaluate>
						<evaluate><test><strcmp use-answer="yes" /></test></evaluate>
						<evaluate><test><strcmp use-answer="yes" /></test></evaluate>
						<evaluate><test><strcmp use-answer="yes" /></test></evaluate>
					</evaluation>
				</exercise>
			</p>
		
		</reading-questions>
		
		<subsubsection><title> Definition </title>
			
			<p>
				In the last section, we mentioned that piecewise functions can't be directly handled by the Laplace transform. We also hinted that there was a function that could simulate this <q>on</q> or <q>off</q> behavior of a piecewise function based on the <m>t</m>-values.
			</p>
			
			<p>
				This is exactly what the <em>unit step function</em> does. Also called the <em>Heaviside function</em>, it acts like a mathematical switch that flips on at a specific value of <m>t</m>. We define it as follows:
			</p>
			
			<definition xml:id="unit-step-function">
				<statement>
					<p>
						The <em> unit step function</em>, <m>u(t)</m>, is defined as
					</p>
					<sidebyside widths="5% 25% 10% 45% 15%" valign="middle">
						<p/>
						<p>
							<me>
								u(t) = \left\{
								\begin{array}{ll}
									0,	&amp; t \lt 0\\
									1,	&amp; t \ge 0.
								\end{array} \right.
							</me>
						</p>
						<p/>
						<p>
							<image>
								<latex-image>
									\begin{tikzpicture}[domain=-3:3, samples=200, scale=0.7]
				
										% === Piecewise Function with 2 Parts ===
										
										% === figure/domain/tick bounds ===
										\def\tmin{-3.5}	\def\tmax{3.5}
										\def\ymin{-1.1}	\def\ymax{1.8}
										\def\tI{-3.5}	\def\tF{3.5}
										\def\ttickI{-3}	\def\ttickF{3}
										\def\ytickI{1}	\def\ytickF{1}
									
										% === Transistions ===
										\def\c{0}
									
										% === Function definitions/colors ===
										\newcommand{\f}[1]{0}	\def\ftex{0}	\def\fColor{blue}			\def\fFill{blue!15}
										\newcommand{\g}[1]{1}	\def\gtex{1}	\def\gColor{green!60!black}	\def\gFill{green!15}
				
										% === Evaluate endpoint values ===
										\def\fc{\f{\c}}		\def\gc{\g{\c}}
									
										% === Background regions ===
										\fill[\fFill] (\tI,	\ymin)	rectangle (\c,	\ymax);
										\fill[\gFill] (\c,	\ymin)	rectangle (\tF,	\ymax);
									
										% === Axes ===
										\draw[-&gt;] (\tmin	,0		) -- (\tmax	,0		) node[font=\small, below]	{$t$};
										\draw[-&gt;] (0		,\ymin	) -- (0		,\ymax	) node[font=\small, left]	{};
				
										% === Tick marks and labels ===
										\foreach \t in {\ttickI,...,\ttickF} {
											\draw[gray!70]	(\t,0.1) -- (\t,-0.1);				% t ticks
											\node[below, font=\small] at	(\t,-0.08) {\t};	% t labels	
										}
										\foreach \y in {\ytickI,...,\ytickF} {
											\draw[gray!70]	(0.1,\y) -- (-0.1,\y);			% y ticks
											\node[left, font=\small] at	(-0.05,\y) {\y};	% y labels
										}
									
										% === Function plots ===
										\draw[\fColor, very thick] plot[domain=\tI:\c-0.05, variable=\t]	(\t, {\f{\t}});
										\draw[\gColor, very thick] plot[domain=\c:\tF, variable=\t]			(\t, {\g{\t}});
				
										% === Endpoint dots ===
										\draw[\fColor, thick]	(\c,{\f{\c}})	circle[radius=2pt];
										\fill[\gColor]			(\c,{\g{\c}})	circle[radius=2pt];
				
										% === Region Labels ===
										\node[\fColor, font=\scriptsize, above] at ({(\tI + \c)/2}, {\ymin}) {$t \lt \c$};
										\node[\gColor, font=\scriptsize, above] at ({(\c + \tF)/2}, {\ymin}) {$t \ge \c$};
				
										<!-- \node[\fColor, font=\small, below] at ({(\tI + \c)/2}, {\ymax}) {$u(t)=\ftex$}; -->
										\node[\gColor, font=\small, below] at ({(\c + \tF)/2}, {\ymax}) {$u(t)$};

										\node[\fColor, font=\scriptsize] at ({(\tI + \c)/2}, 0.5) {$\text{``off''}$};
										\node[\gColor, font=\scriptsize] at ({(\c + \tF)/2}, 0.5) {$\text{``on''}$};
									
									\end{tikzpicture}
								</latex-image>
							</image>
						</p>
						<p/>
					</sidebyside>
				</statement>
			</definition>

			<exercise>
				<statement>
					<p>
						What are the only values <m>u(t)</m> can take for any value of <m>t</m>?
					</p>
				</statement>
				<choices>
					<choice correct="no">
						<statement>Only 0</statement>
					</choice>
					<choice correct="no">
						<statement>Only 1</statement>
					</choice>
					<choice correct="yes">
						<statement>Only 0 and 1</statement>
					</choice>
					<choice correct="no">
						<statement>Only positive numbers</statement>
					</choice>
					<choice correct="no">
						<statement>Any number</statement>
					</choice>
				</choices>
			</exercise>

			<p>
				The fundamental property of a unit step function is that it only takes on two values: zero and one. Therefore, for any function <m>f(t)</m>, the product, <m>f(t) \cdot u(t)</m>, indicates that <m>f(t)</m> is multipied by either either zero or one.
			</p>

			<p>
				For example, the following product has two possible cases:
				<me>
					\left(\frac15 t^2 - 1\right) u(t) = \left\{
					\begin{array}{ll}
						0,	&amp; t \lt 0 \quad (\text{since } u(t) = 0)\\
						\frac15 t^2 - 1,	&amp; t \ge 0 \quad (\text{since } u(t) = 1).
					\end{array} \right.
				</me>
			</p>

			<p>
				In this context, you can think of <m>u(t)</m> as a switch that turns off a function on <m>(-\infty, 0)</m> and turns on the function on <m>[0, \infty)</m>. The interactive figure below lets you explore this idea. In it, you'll find three function labels: one is a parabola, another is <m>u(t)</m>, and the third is their product.
			</p>
			
			<sidebyside width="70%" margins="15%">
				<figure>
					<caption> Exploring the product: <m>\left(\frac15 t^2 - 1\right) u(t)</m> </caption>
					<interactive xml:id="unit-step-1" platform="jsxgraph" aspect="10:5" source="code/jsxgraph/unit-step-interactives/unit-step-1.js">
						<sidebyside width="100%">
							<stack>
								<slate xml:id="unit-step-labels" surface="jsxboard" aspect="10:1" />
								<slate xml:id="unit-step-curves" surface="jsxboard" aspect="5:2" />
							</stack>
						</sidebyside>
						<instructions>
							<p>
								You can hover over a function to preview its graph or click on it to toggle its graph on and off. 
							</p>

							<p>
								To interact, try the following:
								<ol>
									<li>
										Hover over each function to preview its graph.
									</li>
									<li>
										Select <m>\frac{1}{5}t^2 - 1</m> to see the full parabola, which exists for all values of <m>t</m>.
									</li>
									<li>
										Now, select <m>u(t)</m>. This is our <q>switch</q> that turns on at <m>t = 0</m>.
									</li>
									<li>
										Finally, select the product <m>\left(\frac{1}{5}t^2 - 1\right) \cdot u(t)</m>. This shows the parabola turning on at <m>t = 0</m>.
									</li>
								</ol>
							</p>
						</instructions>
						<static>
							<image source="code/jsxgraph/unit-step-interactives/kinematics.png" width="60%" />
						</static>
					</interactive>
				</figure>
			</sidebyside>
			
			<p>
				Multiplying a function by <m>u(t)</m> has the effect of erasing everything that came before <m>t = 0</m>. It forces the function to be zero until the unit step turns on. This is a powerful trick: it lets us take any function and "delay" it until a specific moment in time.
			</p>
			
			<p>
				In the next section, you'll learn how this technique allows us to rewrite piecewise-defined functions in a form that the Laplace transform can handle.
			</p>
			
			<xi:include href="./c7-exercises/c7-chkpts-4-1-1-unit-step-functions.ptx" />

		</subsubsection>

		<reading-questions><title> ðŸ‘€ <em>Reading Preparation</em> </title>

			<p>
				<exercise label="prep-matching-shifts"><title>Matching Shifts of <m>\sin(t)</m></title>
					<statement>
						<p>
						Consider the function <m>\sin(t)</m>. Match each of the following expressions with its correct description of how the graph is shifted.
						</p>
					</statement>
					<matches>
						<match>
							<premise><m>\sin(t - 1)</m></premise>
							<response>Shifted to the right by 1</response>
						</match>
						<match>
							<response>Shifted to the left and down by 1</response>
						</match>
						<match>
							<premise><m>\sin(t + 1)</m></premise>
							<response>Shifted to the left by 1</response>
						</match>
						<match>
							<premise><m>\sin(t) + 1</m></premise>
							<response>Shifted up by 1</response>
						</match>
						<match>
							<premise><m>\sin(t - 1) - 1</m></premise>
							<response>Shifted to the right and down by 1</response>
						</match>
					</matches>
				</exercise>
			</p>
		
		</reading-questions>

		<subsubsection><title> Shifting the Unit Step Function </title>
			<p>
				As we saw, the standard unit function <q>turns on</q> a function at <m>t=0</m>, but we would also like the ability to <q>turn on</q> a function at any time <m>t=c</m>. To do this, we can shift the unit step function to the right or left. The unit step function is defined as
			</p>

			<definition xml:id="shifted-unit-step-function">
				<statement>
					<p>
						The <em>shifted unit step function</em>, <m>u_c(t)</m>, is defined as
					</p>
					<sidebyside widths="2% 46% 5% 45% 2%" valign="middle">
						<p/>
						<p>
							<md>
								<mrow>
									u_c(t) 
									\amp = u(t - c) = \left\{
										\begin{array}{ll}
											0,	&amp; t \lt c\\
											1,	&amp; t \ge c.
										\end{array} 
										\right.
								</mrow>
							</md>
						</p>
						<p/>
						<p>
							<image>
								<latex-image>
									\begin{tikzpicture}[domain=-2:4, samples=200, scale=0.7]
				
										% === Piecewise Function with 2 Parts ===
										
										% === figure/domain/tick bounds ===
										\def\tmin{-2.5}	\def\tmax{4.5}
										\def\ymin{-1.1}	\def\ymax{1.8}
										\def\tI{-2.5}	\def\tF{4.5}
										\def\ttickI{-2}	\def\ttickF{4}
										\def\ytickI{1}	\def\ytickF{1}
									
										% === Transistions ===
										\def\c{1.5}
									
										% === Function definitions/colors ===
										\newcommand{\f}[1]{0}	\def\ftex{0}	\def\fColor{blue}			\def\fFill{blue!15}
										\newcommand{\g}[1]{1}	\def\gtex{1}	\def\gColor{green!60!black}	\def\gFill{green!15}
				
										% === Evaluate endpoint values ===
										\def\fc{\f{\c}}		\def\gc{\g{\c}}
									
										% === Background regions ===
										\fill[\fFill] (\tI,	\ymin)	rectangle (\c,	\ymax);
										\fill[\gFill] (\c,	\ymin)	rectangle (\tF,	\ymax);
									
										% === Axes ===
										\draw[-&gt;] (\tmin	,0		) -- (\tmax	,0		) node[font=\small, below]	{$t$};
										\draw[-&gt;] (0		,\ymin	) -- (0		,\ymax	) node[font=\small, left]	{};
				
										% === Tick marks and labels ===
										\foreach \t in {\ttickI,...,\ttickF} {
											\draw[gray!70]	(\t,0.1) -- (\t,-0.1);				% t ticks
											\node[below, font=\small] at	(\t,-0.08) {\t};	% t labels	
										}
										\foreach \y in {\ytickI,...,\ytickF} {
											\draw[gray!70]	(0.1,\y) -- (-0.1,\y);			% y ticks
											\node[left, font=\small] at	(-0.05,\y) {\y};	% y labels
										}
									
										% === Function plots ===
										\draw[\fColor, very thick] plot[domain=\tI:\c-0.05, variable=\t]	(\t, {\f{\t}});
										\draw[\gColor, very thick] plot[domain=\c:\tF, variable=\t]			(\t, {\g{\t}});
				
										% === Endpoint dots ===
										\draw[\fColor, thick]	(\c,{\f{\c}})	circle[radius=2pt];
										\fill[\gColor]			(\c,{\g{\c}})	circle[radius=2pt];
				
										% === Region Labels ===
										\node[\fColor, font=\scriptsize, above] at ({(\tI + \c)/2}, {\ymin}) {$t \lt c$};
										\node[\gColor, font=\scriptsize, above] at ({(\c + \tF)/2}, {\ymin}) {$t \ge c$};
										
										% === Transition Labels ===
										\node[font=\small, below] at ({\c}, 0) {$c$};
				
										<!-- \node[\fColor, font=\small, below] at ({(\tI + \c)/2}, {\ymax}) {$u(t)=\ftex$}; -->
										\node[\gColor, font=\small, below] at ({(\c + \tF)/2}, {\ymax}) {$u_c(t)$};

										\node[\fColor, font=\scriptsize] at ({(\tI + \c)/2}, 0.5) {$\text{``off''}$};
										\node[\gColor, font=\scriptsize] at ({(\c + \tF)/2}, 0.5) {$\text{``on''}$};
									
									\end{tikzpicture}
								</latex-image>
							</image>
						</p>
						<p/>
					</sidebyside>
				</statement>
			</definition>

			<!-- <sidebyside width="70%" margins="15%">
				<figure>
					<caption> Exploring the product: <m>\left(\frac15 t^2 - 1\right) u(t)</m> </caption>
					<interactive xml:id="unit-step-3" platform="jsxgraph" aspect="1:1" source="code/jsxgraph/unit-step-interactives/unit-step-3.js">
						<sidebyside width="100%">
							<stack>
								<slate xml:id="unit-step-slider-board" surface="jsxboard" aspect="1:1" />
							</stack>
						</sidebyside>
						<instructions>
							<p>
								You can hover over a function to preview its graph or click on it to toggle its graph on and off. 
							</p>

							<p>
								To interact, try the following:
								<ol>
									<li>
										Hover over each function to preview its graph.
									</li>
									<li>
										Select <m>\frac{1}{5}t^2 - 1</m> to see the full parabola, which exists for all values of <m>t</m>.
									</li>
									<li>
										Now, select <m>u(t)</m>. This is our <q>switch</q> that turns on at <m>t = 0</m>.
									</li>
									<li>
										Finally, select the product <m>\left(\frac{1}{5}t^2 - 1\right) \cdot u(t)</m>. This shows the parabola turning on at <m>t = 0</m>.
									</li>
								</ol>
							</p>
						</instructions>
						<static>
							<image source="code/jsxgraph/unit-step-interactives/kinematics.png" width="60%" />
						</static>
					</interactive>
				</figure>
			</sidebyside> -->

			<sidebyside width="70%" margins="15%">
				<figure>
					<caption> Exploring the product: <m>\left(\frac15 t^2 - 1\right) u_c(t)</m> </caption>
					<interactive xml:id="unit-step-2" platform="jsxgraph" aspect="5:2" source="code/jsxgraph/unit-step-interactives/unit-step-2.js">
						<sidebyside width="100%">
							<stack>
								<slate xml:id="unit-step-2-plots" surface="jsxboard" aspect="5:2" />
							</stack>
						</sidebyside>
						<instructions>
							<p>
								The point (on the origin) represents the current <m>c</m>-value. You can drag this point along the <m>t</m>-axis to change its value. 
							</p>

							<p>
								To interact, try the following:
								<ol>
									<li>
										Hover over each function to preview its graph.
									</li>
									<li>
										Select <m>\frac{1}{5}t^2 - 1</m> to see the full parabola, which exists for all values of <m>t</m>.
									</li>
									<li>
										Now, select <m>u(t)</m>. This is our <q>switch</q> that turns on at <m>t = 0</m>.
									</li>
									<li>
										Finally, select the product <m>\left(\frac{1}{5}t^2 - 1\right) \cdot u(t)</m>. This shows the parabola turning on at <m>t = 0</m>.
									</li>
								</ol>
							</p>
						</instructions>
						<static>
							<image source="code/jsxgraph/unit-step-interactives/kinematics.png" width="60%" />
						</static>
					</interactive>
				</figure>
			</sidebyside>

			<sidebyside width="70%" margins="15%">
			<figure>
				<caption> Exploring the product: <m>\left(\frac15 t^2 - 1\right) u(t)</m> </caption>
				<interactive xml:id="unit-step-4" platform="jsxgraph" aspect="5:4" source="code/jsxgraph/unit-step-interactives/board_obj.js code/jsxgraph/unit-step-interactives/piece.js code/jsxgraph/unit-step-interactives/main.js">
					<sidebyside width="100%">
						<stack>
							<slate xml:id="unit-step-4-plot1" surface="jsxboard" aspect="5:2" />
							<slate xml:id="unit-step-4-plot2" surface="jsxboard" aspect="5:2" />
						</stack>
					</sidebyside>
					<instructions>
						
					</instructions>
					<static>
						<image source="code/jsxgraph/unit-step-interactives/kinematics.png" width="60%" />
					</static>
				</interactive>
			</figure>
			</sidebyside>

		</subsubsection>

	</subsection>

</section>